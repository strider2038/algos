# Префиксное дерево

## Варианты реализации

Различные варианты реализации префиксного дерева.

### alphabet trie

Префиксное дерево на основе ограниченного строкового алфавита с индексацией массивов
с помощью битовой матрицы.

### byte trie

Префиксное дерево на основе байтовых ключей с индексацией массивов с помощью 256-битной матрицы.

### byte shard trie

Префиксное дерево на основе байтовых ключей с шардированной индексацией массивов
с помощью шардированных битовых матриц. Операции вычисления индекса массива быстрее, чем
в варианте `byte trie`.

### byte suffix trie

Префиксное дерево на основе байтовых ключей с индексацией массивов с помощью 256-битной матрицы.
Оптимизация по памяти в виде хранения суффиксов в ветвях дерева вместо построения
полной цепочки. Эффективнее для операций чтения, но при записи необходимо больше операций.

## Сравнение

Параметры сравнения:

* выделение памяти
* время заполнения
* время доступа по ключу
    * короткий
    * длинный
    * длинный суффикс

Виды данных для заполнения:

* случайно сгенерированные строки
* реальные данные (названия городов)

Сравнительная таблица на основе названий городов (около 1,2 млн записей)

Для наглядности добавлено сравнение с нативной хеш-таблицей `map` из языка.

| Параметр              | alphabet | byte shard |     byte | byte suffix |    map |
|-----------------------|---------:|-----------:|---------:|------------:|-------:|
| put, память           |   622 MB |   1 844 MB | 1 016 MB |      413 MB | 118 MB |
| put, время заполнения |   744 ms |   1 277 ms |   810 ms |      352 ms | 211 ms |
| get, короткий ключ    |    27 ns |      17 ns |    22 ns |       22 ns | 9.8 ns |
| get, длинный ключ     |   166 ns |     133 ns |   143 ns |      101 ns |  12 ns |
| get, длинный суффикс  |   149 ns |     120 ns |   130 ns |       59 ns |  12 ns |
